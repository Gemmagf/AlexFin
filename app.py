import streamlit as st
import pandas as pd
import altair as alt

# --- Page Config ---
st.set_page_config(page_title="Swiss Finance with Alex", layout="wide")
st.markdown("""
    <style>
        body {font-family: 'Lato', sans-serif;}
        .main {background-color: #fffaf9; color: #333333;}
        h1, h2, h3 {color: #d10000;}
        .stButton>button {background-color: #d10000; color: white; border-radius: 8px;}
    </style>
""", unsafe_allow_html=True)

# --- Header ---
st.title("üá®üá≠ Swiss Finance Made Simple")
st.subheader("Hi, I'm Alex. I help you understand investments, Krankenkasse & taxes in Switzerland.")
st.markdown("[üìÖ Book a free call](mailto:alex@swissfinance.ch)")

# --- Navigation Tabs ---
tabs = st.tabs(["About", "Topics", "Graphs", "Resources"])

# --- About Tab ---
with tabs[0]:
    st.header("üëã About Me")
    st.write("I'm a Swiss financial consultant passionate about making complex topics simple. Whether it's planning for retirement, picking the right health insurance, or learning to invest, I'm here to guide you every step of the way.")

# --- Topics Tab ---
with tabs[1]:
    st.header("üìò Financial Topics")
    st.markdown("""
    ### üìà Swiss 3rd Pillar (S√§ule 3a)
    Save on taxes while preparing for retirement. [Official info](https://www.ch.ch/en/retirement/3rd-pillar/)

    ### üè• Krankenkasse (Health Insurance)
    Understand mandatory and supplemental health insurance. [Official site](https://www.ch.ch/en/health/health-insurance/)

    ### üßæ Tax Deductions in Switzerland
    Learn how to reduce what you owe. [Swiss tax portal](https://www.ch.ch/en/taxes/)

    ### üí∂ Budgeting the Swiss Way
    Build a smart monthly budget based on Swiss living costs.

    ### üåç Expats & Finance in Switzerland
    Just arrived? Here's your finance starter pack.
    """)

# --- Graphs Tab ---
with tabs[2]:
    st.header("üìä Visual Finance")

    st.subheader("Swiss Budget Example: 50/30/20 Rule")
    data = pd.DataFrame({
        'Category': ['Needs', 'Wants', 'Savings'],
        'CHF': [3000, 1800, 1200]
    })
    chart = alt.Chart(data).mark_arc(innerRadius=50).encode(
        theta=alt.Theta(field="CHF", type="quantitative"),
        color=alt.Color(field="Category", type="nominal",
                        scale=alt.Scale(range=['#d10000', '#999999', '#cccccc'])),
        tooltip=['Category', 'CHF']
    )
    st.altair_chart(chart, use_container_width=True)

    st.subheader("3a Tax Savings Potential")
    df = pd.DataFrame({
        'Income (CHF)': [60000, 80000, 100000, 120000],
        'Tax Saved (CHF)': [1500, 2200, 2700, 3200]
    })
    bar = alt.Chart(df).mark_bar(color="#d10000").encode(
        x='Income (CHF):O',
        y='Tax Saved (CHF):Q',
        tooltip=['Income (CHF)', 'Tax Saved (CHF)']
    )
    st.altair_chart(bar, use_container_width=True)

# --- Resources Tab ---
with tabs[3]:
    st.header("üìÇ Free Tools & Guides")
    st.markdown("""
    - [üì• Download Swiss Budget Template (Excel)](https://example.com/budget-template)
    - [üìò 3a Provider Comparison PDF](https://example.com/3a-comparison)
    - [üóÇ Krankenkasse Guide for Expats](https://example.com/krankenkasse-guide)
    - [üá®üá≠ Federal Tax Office (SFTA)](https://www.estv.admin.ch)
    """)

# --- Footer ---
st.markdown("""
    <hr/>
    <center style='font-size:0.9em;color:#999;'>¬© 2025 Finance with Alex. All rights reserved.</center>
""", unsafe_allow_html=True)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
